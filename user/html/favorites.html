<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cart | Beauty & Blessed</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="../styles/styles.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600;700&family=Montserrat:wght@300;400;500;600&display=swap"
      rel="stylesheet"
    />
    <style>
      /* Favorites Page Styles */
      .products-container {
        padding: 20px;
      }

      .products-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
        gap: 20px;
      }

      .product-card {
        background: var(--gradient-card);
        border-radius: 18px;
        overflow: hidden;
        box-shadow: var(--card-shadow);
        transition: all 0.3s ease;
        border: 1px solid rgba(255, 182, 193, 0.2);
        position: relative;
        overflow: hidden;
        backdrop-filter: blur(10px);
      }

      .product-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
      }

      .product-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 5px;
        height: 100%;
        background: linear-gradient(
          to bottom,
          var(--primary-pink),
          var(--light-pink)
        );
      }

      .product-image {
        width: 100%;
        height: 160px;
        background: linear-gradient(135deg, var(--light-pink), #ffe6f2);
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--primary-pink);
      }

      .product-image i {
        font-size: 40px;
      }

      .product-info {
        padding: 15px;
      }

      .product-name {
        font-size: 14px;
        font-weight: 500;
        color: var(--dark-gray);
        margin-bottom: 5px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .product-price {
        font-size: 16px;
        font-weight: 600;
        color: var(--primary-pink);
        margin-bottom: 10px;
      }

      .product-actions {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .add-to-cart {
        background: linear-gradient(
          135deg,
          var(--primary-pink),
          var(--dark-pink)
        );
        color: white;
        border: none;
        border-radius: 50%;
        width: 36px;
        height: 36px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: transform 0.3s ease;
      }

      .add-to-cart:hover {
        transform: scale(1.1);
      }

      .like-btn {
        background: none;
        border: none;
        color: var(--text-gray);
        font-size: 18px;
        cursor: pointer;
        transition: color 0.3s ease;
      }

      .like-btn.liked {
        color: var(--primary-pink);
      }
    </style>
  </head>

  <body>
    <!-- Header -->
    <header class="header">
      <div class="brand-header">
        <h1 class="brand-name">Beauty & Blessed</h1>
        <p class="brand-tagline">Elevate Your Everyday Glam.</p>
      </div>
      <div class="user-section">
        <span class="user-greeting" id="user-greeting">Hi, User!</span>
        <button
          class="profile-btn"
          onclick="window.location.href='user_profile.html'"
        >
          <i class="fas fa-user"></i>
        </button>
      </div>
      <button
        class="mobile-profile-btn"
        onclick="window.location.href='user_profile.html'"
      >
        <i class="fas fa-user"></i>
      </button>
    </header>

    <!-- Desktop Navigation -->
    <nav class="desktop-nav">
      <a href="home.html" class="nav-item" data-page="home">
        <i class="fas fa-home"></i>
        <span>Home</span>
      </a>
      <a href="favorites.html" class="nav-item active" data-page="favorites">
        <i class="fas fa-heart"></i>
        <span>Favorites</span>
      </a>
      <!-- In home.html navigation -->
      <a href="recommender.html" class="nav-item" data-page="recommender">
        <i class="fas fa-star"></i>
        <span>Recommender</span>
        <span class="tooltip">Smart Recommender</span>
      </a>
      <a href="cart.html" class="nav-item" data-page="cart">
        <i class="fas fa-shopping-cart"></i>
        <span>Cart</span>
      </a>
      <a href="try-on.html" class="nav-item" data-page="tryon">
        <i class="fas fa-camera"></i>
        <span>Virtual Try-On</span>
      </a>
    </nav>

    <!-- Search Bar -->
    <div class="search-container">
      <div class="search-bar">
        <i class="fas fa-search"></i>
        <input type="text" placeholder="Search for products..." />
      </div>
    </div>

    <!-- Page Content -->
    <main>
      <!-- Favorites Page -->
      <section id="favorites" class="page-content">
        <div class="products-container">
          <h2 class="section-title">Your Favorites</h2>
          <div class="products-grid" id="favorites-grid">
            <!-- Favorite products will be dynamically added here -->
          </div>
        </div>
      </section>
    </main>

    <!-- Mobile Navigation -->
    <nav class="mobile-nav">
      <div class="mobile-nav-items">
        <a href="home.html" class="nav-item" data-page="home">
          <i class="fas fa-home"></i>
          <span>Home</span>
        </a>
        <a href="favorites.html" class="nav-item active" data-page="favorites">
          <i class="fas fa-heart"></i>
          <span>Favorites</span>
        </a>
        <a href="recommender.html" class="nav-item" data-page="recommender">
          <i class="fas fa-star"></i>
          <span>Recommender</span>
        </a>
        <a href="cart.html" class="nav-item" data-page="cart">
          <i class="fas fa-shopping-cart"></i>
          <span>Cart</span>
        </a>
        <a href="try-on.html" class="nav-item" data-page="tryon">
          <i class="fas fa-camera"></i>
          <span>Try-On</span>
        </a>
      </div>
    </nav>

    <script>
      // Render favorites
      function renderFavorites() {
        const favoritesGrid = document.getElementById("favorites-grid");
        if (!favoritesGrid) return;

        favoritesGrid.innerHTML = "";

        // Favorites should show the main product cards, not variants, so filter the top-level 'products' array
        const favoriteProducts = products.filter((p) => p.liked);

        if (favoriteProducts.length === 0) {
          favoritesGrid.innerHTML =
            "<p class='text-center p-4 text-gray-500'>You have no favorite products yet</p>";
          return;
        }

        favoriteProducts.forEach((product) => {
          const productCard = createProductCard(product);
          favoritesGrid.appendChild(productCard);
        });
      }

      // Toggle like status
      function toggleLike(productId) {
        const product = products.find((p) => p.id === productId);
        if (product) {
          product.liked = !product.liked;
          renderFavorites();
          showNotification(
            product.liked ? "Added to favorites!" : "Removed from favorites!"
          );
        }
      }
    </script>
  </body>
</html>
